CREATE DATABASE HMS;
USE HMS;


CREATE TABLE user (
    user_id VARCHAR(255) PRIMARY KEY ,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100)
);
INSERT INTO user VALUES ('U001','admin','1234','admin@gmail.com');

select * from user;

CREATE TABLE supplier (
    supplier_id VARCHAR(255) PRIMARY KEY ,
    name VARCHAR(100),
    contact VARCHAR(50),
    address VARCHAR(255),
    email VARCHAR(100)
);
INSERT INTO supplier VALUES ('S001','Hardware A', '0771234567', 'Bentota', 'hardwarea@gmail.com');


CREATE TABLE categories (
    category_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100)
);
INSERT INTO categories VALUES ('Electronics');


CREATE TABLE customer (
    customer_id VARCHAR(255) PRIMARY KEY ,
    name VARCHAR(100),
    contact VARCHAR(50),
    address VARCHAR(255),
    email VARCHAR(100)
);
INSERT INTO customer VALUES
('C001','Sanduni', '0711111111', 'Bentota', 'sanduni@gmail.com');


CREATE TABLE items (
    item_id INT PRIMARY KEY AUTO_INCREMENT,
    supplier_id INT,
    category_id INT,
    name VARCHAR(100),
    email VARCHAR(100),
    price DOUBLE,
    manufacturing_date DATE,
    expiry_date DATE,
    FOREIGN KEY (supplier_id) REFERENCES suppliers(supplier_id),
    FOREIGN KEY (category_id) REFERENCES categories(category_id)
);
INSERT INTO items (supplier_id, category_id, name, email, price, manufacturing_date, expiry_date) VALUES
(S001, 1, 'Hammer', 'info@hardwarea.com', 1500.00, '2025-01-01', '2027-01-01');


CREATE TABLE orders (
    order_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT,
    item_id INT,
    qty INT,
    price DOUBLE,
    order_date DATE,
    status VARCHAR(50),
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
    FOREIGN KEY (item_id) REFERENCES items(item_id)
);
INSERT INTO orders (customer_id, item_id, qty, price, order_date, status) VALUES
(C001, 1, 1, 1500.00, '2025-11-01', 'Completed');


CREATE TABLE order_items (
    order_id INT,
    item_id INT,
    PRIMARY KEY (order_id, item_id),
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (item_id) REFERENCES items(item_id)
);
INSERT INTO order_items (order_id, item_id) VALUES (O001, I001);


CREATE TABLE deliveries (
    delivery_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT,
    delivery_date DATE,
    reason VARCHAR(255),
    delivery_payment DOUBLE,
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
);
INSERT INTO deliveries (order_id, delivery_date, reason, delivery_payment) VALUES
(1, '2025-11-02', 'Normal Delivery', 500.00);


CREATE TABLE warranties (
    warranty_id INT PRIMARY KEY AUTO_INCREMENT,
    delivery_id INT,
    order_id INT,
    start_date DATE,
    end_date DATE,
    status VARCHAR(50),
    FOREIGN KEY (delivery_id) REFERENCES deliveries(delivery_id),
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
);
INSERT INTO warranties (delivery_id, order_id, start_date, end_date, status) VALUES
(1, 1, '2025-11-02', '2026-11-02', 'Active');


CREATE TABLE returns (
    return_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT,
    return_date DATE,
    reason VARCHAR(255),
    refund_amount DOUBLE,
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
);
INSERT INTO returns (order_id, return_date, reason, refund_amount) VALUES
(1, '2025-11-05', 'Damaged item', 2000.00);


CREATE TABLE payments (
    payment_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT,
    payment_date DATE,
    payment_method VARCHAR(50),
    total_amount DOUBLE,
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
);
INSERT INTO payments (order_id, payment_date, payment_method, total_amount) VALUES
(1, '2025-11-02', 'Cash', 1500.00);